<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="generator" content="Aspose.Words for .NET 23.1.0" /><title></title><style type="text/css">body { font-family:'Times New Roman'; font-size:12pt }p { margin:0pt }li { margin-top:0pt; margin-bottom:0pt }</style></head><body><div><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">当下</span><span style="font-family:'Courier New'">ChatGPT</span><span style="font-family:'Microsoft JhengHei'">大火</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">体验了一段时间后感觉确实能够在一定程度上提高自己的学习和工作效率</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">但是</span><span style="font-family:'Courier New'">Web</span><span style="font-family:'Microsoft JhengHei'">版的体验在移动设备端欠佳</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">故而希望能够利用</span><span style="font-family:'Courier New'">Telegram BOT，</span><span style="font-family:'Microsoft JhengHei'">优雅地在全平台上使用</span><span style="font-family:'Courier New'">ChatGPT</span><span style="font-family:'MS Gothic'">。</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">使用了现成的</span><span style="font-family:'Courier New'">ChatGPT Telegram Bot</span><span style="font-family:'Microsoft JhengHei'">项目</span><span style="font-family:'Courier New'">：</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">步骤</span><span style="font-family:'Courier New'">&amp;</span><span style="font-family:'Microsoft JhengHei'">排坑</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:17.6pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">虽然这个项目提供了</span><span>Docker</span><span style="font-family:'Microsoft JhengHei'">版本</span><span>，</span><span style="font-family:'Microsoft JhengHei'">但是测试下来发现存在问题跑不起来</span><span>，</span><span style="font-family:'Microsoft JhengHei'">所以只能退而求其次</span><span>，</span><span style="font-family:'Microsoft JhengHei'">使用</span><span>ubuntu</span><span style="font-family:'Microsoft JhengHei'">桌面环境</span><span style="font-family:'MS Gothic'">。</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">docker run -d --name ubuntu-desktop-lxde-vnc -p 6080:80 -p 5900:5900 -e VNC_PASSWORD=abcd@1234 dorowu/ubuntu-desktop-lxde-vnc</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">注意</span><span style="font-family:'Courier New'">：abcd@1234</span><span style="font-family:'Microsoft JhengHei'">就是我设置的</span><span style="font-family:'Courier New'">VNC</span><span style="font-family:'Microsoft JhengHei'">登录的密码</span><span style="font-family:'MS Gothic'">。</span><span style="font-family:'Courier New'">&lt;br /&gt;</span><span style="font-family:'Microsoft JhengHei'">这里的容器暴露了两个端口</span><span style="font-family:'Courier New'">&lt;br /&gt;6080：</span><span style="font-family:'Microsoft JhengHei'">是</span><span style="font-family:'Courier New'">web</span><span style="font-family:'Microsoft JhengHei'">版的</span><span style="font-family:'Courier New'">vnc，</span><span style="font-family:'Microsoft JhengHei'">可以在浏览器上直接访问桌面环境</span><span style="font-family:'Courier New'">&lt;br /&gt;5900：</span><span style="font-family:'Microsoft JhengHei'">是使用客户端工具连接的端口</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol start="2" type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:17.6pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span>apt-get update</span><span style="font-family:'Microsoft JhengHei'">报错</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">W: GPG error: http://dl.google.com/linux/chrome/deb stable InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 4EB27DB2A3B88B8B</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">询问</span><span style="font-family:'Courier New'">chatGPT</span><span style="font-family:'Microsoft JhengHei'">后</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">给出回复</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">这个错误表示你的计算机无法验证从</span><span style="font-family:'Courier New'"> "&lt;a href="http://dl.google.com/linux/chrome/deb" target="_new"&gt;http://dl.google.com/linux/chrome/deb&lt;/a&gt; stable" </span><span style="font-family:'Microsoft JhengHei'">下载的软件包</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">因为缺少公钥</span><span style="font-family:'MS Gothic'">。</span><span style="font-family:'Microsoft JhengHei'">要解决这个问题</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">可以尝试运行以下命令以添加缺少的公钥</span><span style="font-family:'Courier New'">：</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4EB27DB2A3B88B8B</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">然后再运行以下命令更新软件包列表</span><span style="font-family:'Courier New'">：</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">sudo apt update</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">这应该解决这个错误</span><span style="font-family:'MS Gothic'">。</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">Done.</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol start="3" type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:17.6pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">根据项目要求安装</span><span>Python</span><span style="font-family:'Microsoft JhengHei'">和</span><span>Miniconda</span><span style="font-family:'Microsoft JhengHei'">环境</span><span>&lt;br /&gt;3.1</span><span style="-aw-import:spaces">&#xa0; </span><span>Python</span><span style="font-family:'Microsoft JhengHei'">安装</span><span>：`sudo apt-get install python -y`</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">root@07f35165513a:/root# python --version</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">Python 3.8.5</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">3.2 Miniconda</span><span style="font-family:'Microsoft JhengHei'">安装</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:55.4pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span>Go to the [Miniconda download page](https://docs.conda.io/en/latest/miniconda.html).</span></li><li style="margin-left:55.4pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span>Click on the appropriate installer for your operating system.</span></li><li style="margin-left:55.4pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span>Follow the prompts to complete the installation.</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">获取到了</span><span style="font-family:'Courier New'">Miniconda Installer Link</span><span style="font-family:'Microsoft JhengHei'">后</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">bash</span><span style="font-family:'Courier New'; -aw-import:spaces">&#xa0; </span><span style="font-family:'Courier New'">Miniconda3-latest-Linux-x86_64.sh</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">安装过程中需要回车一次</span><span style="font-family:'Courier New'">，`Yes`</span><span style="font-family:'Microsoft JhengHei'">一次</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">再回车一次使用默认路径</span><span style="font-family:'Courier New'">`/home/ubuntu/miniconda3`</span><span style="font-family:'Microsoft JhengHei'">安装</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">最后再</span><span style="font-family:'Courier New'">`yes`</span><span style="font-family:'Microsoft JhengHei'">一次</span><span style="font-family:'Courier New'">&lt;br /&gt;</span><span style="font-family:'Microsoft JhengHei'">输入</span><span style="font-family:'Courier New'">conda</span><span style="font-family:'Microsoft JhengHei'">后</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">提示</span><span style="font-family:'Courier New'">`bash: conda: command not found`&lt;br /&gt;</span><span style="font-family:'Microsoft JhengHei'">原因是因为</span><span style="font-family:'Courier New'">~/.bashrc</span><span style="font-family:'Microsoft JhengHei'">文件没有配置好</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">sudo apt-get install vim -y</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">vim ~/.bashrc</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">#</span><span style="font-family:'Microsoft JhengHei'">最后一行加上</span><span style="font-family:'Courier New'">,</span><span style="font-family:'Microsoft JhengHei'">但是要注意目录</span><span style="font-family:'Courier New'">，</span><span style="font-family:'Microsoft JhengHei'">使用上面提到的默认路径</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">export PATH=$PATH:/home/ubuntu/miniconda3/bin</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">source ~/.bashrc</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">此时再运行</span><span style="font-family:'Courier New'">`conda info --envs`，</span><span style="font-family:'Microsoft JhengHei'">如下所示即为成功</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">(base) root@07f35165513a:/root# conda info --envs</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'"># conda environments:</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">#</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">base</span><span style="font-family:'Courier New'; -aw-import:spaces">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </span><span style="font-family:'Courier New'">*</span><span style="font-family:'Courier New'; -aw-import:spaces">&#xa0; </span><span style="font-family:'Courier New'">/home/ubuntu/miniconda3</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol start="4" type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:17.6pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">根据项目要求</span><span>，</span><span style="font-family:'Microsoft JhengHei'">创建</span><span>conda</span><span style="font-family:'Microsoft JhengHei'">环境</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">cd /Desktop</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">sudo apt-get install git -y</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">git clone https://github.com/altryne/chatGPT-telegram-bot.git</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">cd chatGPT-telegram-bot</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">pip install -r requirements.txt #</span><span style="font-family:'Microsoft JhengHei'">顺便装一下运行环境</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">conda env create -f environment.yml</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">conda activate chat</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol start="5" type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:17.6pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">根据项目要求</span><span>，</span><span style="font-family:'Microsoft JhengHei'">安装</span><span>Playwright</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">cd /home/ubuntu/miniconda3</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">playwright install</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">playwright install-deps</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol start="6" type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:17.6pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">设置</span><span>Telegram Bot</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">cd /root/Desktop/chatGPT-telegram-bot</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">vim .env #</span><span style="font-family:'Microsoft JhengHei'">参考</span><span style="font-family:'Courier New'">.env.example</span><span style="font-family:'Microsoft JhengHei'">内的注释自行填写</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol start="7" type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:17.6pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span style="font-family:'Microsoft JhengHei'">修改</span><span>server.py</span><span style="font-family:'Microsoft JhengHei'">文件</span><span>&lt;br /&gt;</span><span style="font-family:'Microsoft JhengHei'">项目有个</span><span>bug，bot</span><span style="font-family:'Microsoft JhengHei'">不会回复信息</span><span>，</span><span style="font-family:'Microsoft JhengHei'">参考下面</span><span>issues</span><span style="font-family:'Microsoft JhengHei'">修复即可</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">// change this line in server.py (line 92)</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">page_elements = PAGE.query_selector_all("div[class*='request-']")</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">// to this</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">page_elements = PAGE.query_selector_all("div[class*='lg:w-[calc(100%-115px)]']")</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'; -aw-import:ignore">&#xa0;</span></p><ol start="8" type="1" style="margin:0pt; padding-left:0pt"><li style="margin-left:17.6pt; padding-left:7.6pt; font-family:'Courier New'; font-size:10.5pt"><span>VNC</span><span style="font-family:'Microsoft JhengHei'">连接进入桌面</span><span>&lt;br /&gt;</span><span style="font-family:'Microsoft JhengHei'">使用自带的</span><span>LXTerminal</span><span style="font-family:'Microsoft JhengHei'">进行下面操作</span></li></ol><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```bash</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">/cd /root/Desktop/chatGPT-telegram-bot</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">apt-get install pip</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">pip install -r requirements.txt</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">playwright install</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">python server.py</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">```</span></p><p style="font-size:10.5pt"><span style="font-family:'Courier New'">OK</span></p></div></body></html>